<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í´ë” ë©”ë‰´ ì‹œìŠ¤í…œ - ë™ì  íŒŒì¼ ë¡œë“œ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            height: 100vh;
            background: #f5f5f5;
        }
        
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            overflow-y: auto;
            padding: 20px 0;
        }
        
        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: #34495e;
            border-left-color: #3498db;
        }
        
        .menu-item.active {
            background: #3498db;
            border-left-color: #2980b9;
            font-weight: bold;
        }
        
        .submenu {
            padding-left: 40px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .submenu.active {
            max-height: 500px;
        }
        
        .submenu-item {
            padding: 10px 0;
            cursor: pointer;
            font-size: 14px;
            opacity: 0.8;
            transition: all 0.2s ease;
        }
        
        .submenu-item:hover {
            opacity: 1;
            padding-left: 10px;
        }
        
        .submenu-item.active {
            color: #f39c12;
            font-weight: bold;
        }
        
        .content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background: white;
            display: flex;
            flex-direction: column;
        }
        
        .content.markdown-body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #24292e;
        }
        
        .content-placeholder {
            text-align: center;
            color: #999;
            padding: 60px 20px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: #fee;
            border: 1px solid #fcc;
            color: #c33;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .toggle-icon {
            float: right;
            font-size: 12px;
        }

        .breadcrumb {
            font-size: 12px;
            color: #999;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar" id="sidebar">
        <!-- ë©”ë‰´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
    </div>
    
    <div class="content markdown-body" id="content">
        <div class="content-placeholder">
            <p>ğŸ‘ˆ ì¢Œì¸¡ ë©”ë‰´ì—ì„œ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”</p>
        </div>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        // Google Drive API ì„¤ì •
        const GOOGLE_API_KEY = 'AIzaSyDOIdawmHgkx2wV04ohDl8_jaDNhOjibdg'; // Google Cloudì—ì„œ ë°›ì€ API í‚¤ ì…ë ¥
        const CLIENT_ID = '906251648544-lv0g297k3e0ckde767lvritqkmv6eben.apps.googleusercontent.com'; // OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID

        // ë©”ë‰´ êµ¬ì¡° ì •ì˜ (ë¡œì»¬ ë§ˆí¬ë‹¤ìš´ íŒŒì¼)
        const menuData = {
            "ì†Œê°œ": {
                "íšŒì‚¬ ê°œìš”": "company-overview.md",
                "ë¯¸ì…˜ & ë¹„ì „": "mission-vision.md",
                "íŒ€ ì†Œê°œ": "team-intro.md"
            },
            "ì„œë¹„ìŠ¤": {
                "ì„œë¹„ìŠ¤ A": "service-a.md",
                "ì„œë¹„ìŠ¤ B": "service-b.md",
                "ê°€ê²© ì •ë³´": "pricing.md"
            },
            "ë¬¸ì„œ": {
                "ì‚¬ìš© ì„¤ëª…ì„œ": "user-manual.md",
                "FAQ": "faq.md",
                "ê¸°ìˆ  ê°€ì´ë“œ": "tech-guide.md"
            }
        };

        const sidebar = document.getElementById('sidebar');
        const content = document.getElementById('content');
        let currentFileId = null;

        // ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜ (ê°„ë‹¨í•œ ë²„ì „)
        function markdownToHtml(markdown) {
            let html = markdown;
            
            // ì œëª© ì²˜ë¦¬
            html = html.replace(/^### (.*?)$/gm, '<h3>$1</h3>');
            html = html.replace(/^## (.*?)$/gm, '<h2>$1</h2>');
            html = html.replace(/^# (.*?)$/gm, '<h1>$1</h1>');
            
            // êµµì€ ê¸€ì”¨
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');
            
            // ê¸°ìš¸ì„
            html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
            html = html.replace(/_(.*?)_/g, '<em>$1</em>');
            
            // ë§í¬
            html = html.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>');
            
            // ì¤„ ë°”ê¿ˆ
            html = html.replace(/\n\n/g, '</p><p>');
            html = '<p>' + html + '</p>';
            
            // ì½”ë“œ ë¸”ë¡
            html = html.replace(/```(.*?)\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>');
            
            // ì¸ë¼ì¸ ì½”ë“œ
            html = html.replace(/`(.*?)`/g, '<code>$1</code>');
            
            // ë¦¬ìŠ¤íŠ¸
            html = html.replace(/^- (.*?)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            html = html.replace(/^(\d+)\. (.*?)$/gm, '<li>$2</li>');
            
            // í‘œ ì²˜ë¦¬
            html = html.replace(/\|(.+)\|/g, (match) => {
                const cells = match.split('|').filter(cell => cell.trim());
                return '<tr>' + cells.map(cell => `<td>${cell.trim()}</td>`).join('') + '</tr>';
            });
            html = html.replace(/(<tr>.*?<\/tr>)/s, '<table>$1</table>');
            
            return html;
        }

        // Google Drive ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadFileFromGoogleDrive(fileId, itemName, folder) {
            content.innerHTML = `
                <div class="breadcrumb">${folder} > ${itemName}</div>
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Google Driveì—ì„œ íŒŒì¼ì„ ë¡œë”© ì¤‘...</p>
                </div>
            `;

            try {
                // Google Drive íŒŒì¼ì„ ê³µê°œ ê³µìœ  ë§í¬ë¡œ ë‹¤ìš´ë¡œë“œ
                // ì˜µì…˜ 1: ê³µê°œ ë‹¤ìš´ë¡œë“œ URL
                const driveUrl = `https://drive.google.com/uc?export=download&id=${fileId}`;
                
                console.log('Google Drive URL:', driveUrl);
                
                const response = await fetch(driveUrl, {
                    method: 'GET'
                });
                
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    // ì˜µì…˜ 2: ê³µê°œ ê³µìœ  ë§í¬ ì‚¬ìš© (ì‚¬ìš©ìê°€ ë§í¬ë¥¼ ì œê³µí•´ì•¼ í•¨)
                    throw new Error(`HTTP ì˜¤ë¥˜! ìƒíƒœ: ${response.status} - íŒŒì¼ì´ ê³µê°œ ì„¤ì •ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.`);
                }
                
                const markdown = await response.text();
                
                if (markdown.length === 0) {
                    throw new Error('íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
                }
                
                const htmlContent = markdownToHtml(markdown);
                
                content.innerHTML = `
                    <div class="breadcrumb">${folder} > ${itemName}</div>
                    <div class="file-content">
                        ${htmlContent}
                    </div>
                `;

                currentFileId = fileId;
                
                // í™œì„±í™”ëœ ë©”ë‰´ í‘œì‹œ
                document.querySelectorAll('.submenu-item').forEach(item => {
                    item.classList.remove('active');
                });
                if (event && event.target) {
                    event.target.classList.add('active');
                }
            } catch (error) {
                console.error('Google Drive ë¡œë“œ ì˜¤ë¥˜:', error);
                content.innerHTML = `
                    <div class="breadcrumb">${folder} > ${itemName}</div>
                    <div class="error">
                        <strong>âŒ Google Drive íŒŒì¼ ë¡œë“œ ì˜¤ë¥˜</strong><br>
                        ${error.message}<br><br>
                        <small><strong>í•´ê²° ë°©ë²•:</strong><br>
                        1. Google Drive íŒŒì¼ì„ ìš°í´ë¦­<br>
                        2. "ê³µìœ " í´ë¦­<br>
                        3. "ë§í¬ê°€ ìˆëŠ” ëª¨ë“  ì‚¬ìš©ì" ë˜ëŠ” "ê³µê°œ"ë¡œ ì„¤ì •<br>
                        4. <strong>ì €ë„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŒ</strong> ê¶Œí•œ í™•ì¸<br>
                        ë˜ëŠ” <strong>ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ë¡œì»¬ì— ì €ì¥</strong>í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”.
                        </small>
                    </div>
                `;
            }
        }

        // íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° (í™•ì¥ëœ ë²„ì „ - ë¡œì»¬ ë˜ëŠ” Google Drive)
        async function loadFile(filePath, itemName, folder) {
            content.innerHTML = `
                <div class="breadcrumb">${folder} > ${itemName}</div>
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>ë¡œë”© ì¤‘...</p>
                </div>
            `;

            try {
                // Google Drive íŒŒì¼ ID íŒë³„ (ê¸¸ê³  ì•ŒíŒŒë²³+ìˆ«ì ì¡°í•©)
                if (/^[a-zA-Z0-9_-]{25,}$/.test(filePath)) {
                    // Google Drive íŒŒì¼ ID
                    await loadFileFromGoogleDrive(filePath, itemName, folder);
                } else {
                    // ë¡œì»¬ ë§ˆí¬ë‹¤ìš´ íŒŒì¼
                    const response = await fetch(filePath);
                    
                    if (!response.ok) {
                        throw new Error(`íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${filePath}`);
                    }
                    
                    const markdown = await response.text();
                    const htmlContent = markdownToHtml(markdown);
                    
                    content.innerHTML = `
                        <div class="breadcrumb">${folder} > ${itemName}</div>
                        <div class="file-content">
                            ${htmlContent}
                        </div>
                    `;

                    currentFileId = filePath;
                    
                    // í™œì„±í™”ëœ ë©”ë‰´ í‘œì‹œ
                    document.querySelectorAll('.submenu-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    if (event && event.target) {
                        event.target.classList.add('active');
                    }
                }
            } catch (error) {
                content.innerHTML = `
                    <div class="breadcrumb">${folder} > ${itemName}</div>
                    <div class="error">
                        <strong>âŒ ì˜¤ë¥˜ ë°œìƒ</strong><br>
                        íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}<br><br>
                        <small>í•´ê²° ë°©ë²•: ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ê°™ì€ í´ë”ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</small>
                    </div>
                `;
            }
        }

        // ë©”ë‰´ ìƒì„±
        function renderMenu() {
            for (const [folder, items] of Object.entries(menuData)) {
                const folderDiv = document.createElement('div');
                
                const folderItem = document.createElement('div');
                folderItem.className = 'menu-item';
                folderItem.innerHTML = `${folder} <span class="toggle-icon">â–¼</span>`;
                folderItem.onclick = (e) => {
                    e.stopPropagation();
                    const submenu = folderDiv.querySelector('.submenu');
                    submenu.classList.toggle('active');
                };
                
                const submenu = document.createElement('div');
                submenu.className = 'submenu';
                
                for (const [itemName, filePath] of Object.entries(items)) {
                    const submenuItem = document.createElement('div');
                    submenuItem.className = 'submenu-item';
                    submenuItem.textContent = itemName;
                    submenuItem.onclick = (e) => loadFile(filePath, itemName, folder);
                    submenu.appendChild(submenuItem);
                }
                
                folderDiv.appendChild(folderItem);
                folderDiv.appendChild(submenu);
                sidebar.appendChild(folderDiv);
            }
        }

        // ì´ˆê¸°í™”
        renderMenu();
    </script>
</body>
</html>
